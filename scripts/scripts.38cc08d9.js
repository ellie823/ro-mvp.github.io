"use strict";var app=angular.module("roMvpTrackerApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","LocalStorageModule","firebase","angularMoment","ui.router","ui.bootstrap","angular-loading-bar","angular-web-notification","ngAnimate-animate.css"]);app.config(["$stateProvider","$urlRouterProvider","localStorageServiceProvider","cfpLoadingBarProvider",function(a,b,c,d){c.setPrefix("roMvpTrackerApp"),d.includeSpinner=!1,a.state("mvp",{url:"/",templateUrl:"views/mvp.html"}),a.state("login",{url:"/login",templateUrl:"views/login.html"}),a.state("signup",{url:"/signup",templateUrl:"views/signup.html"}),b.otherwise("/")}]),app.run(["$rootScope","$state","firebase",function(a,b,c){a.settings={},a.$state=b;var d={apiKey:"AIzaSyBWou-B2GvCKnjXlNQls9plahI0U0f3Y_8",authDomain:"ro-mvp-tracker.firebaseapp.com",databaseURL:"https://ro-mvp-tracker.firebaseio.com",storageBucket:"ro-mvp-tracker.appspot.com"};c.initializeApp(d)}]),app.controller("MvpCtrl",["$scope","$rootScope","$timeout","$state","DataSrv","webNotification","time",function(a,b,c,d,e,f,g){var h,i,j=function(){a.notifications={},a.updateTimer=null,b.$watch("settings.group",function(b,d){c.cancel(h),b!==d&&(h=c(a.getTrackList,2500))}),b.$watchGroup(["login.authenticating","login.authenticated"],function(a,c){b.login.authenticating===!1&&b.login.authenticated===!1&&d.go("login")}),a.$watchGroup(["mvpList","trackList"],function(){if("object"==typeof a.mvpList&&"object"==typeof a.trackList){var b,c,d;for(var e in a.mvpList)c=a.mvpList[e],c&&(b=c.id+c.map,d=a.trackList[b],c.$track=d||{});a.update()}}),angular.element(window).bind("keyup",function(b){17===b.keyCode&&(a.ctrlDown=!1)}),angular.element(window).bind("keydown",function(b){17===b.keyCode&&(a.ctrlDown=!0),a.ctrlDown&&70===b.keyCode&&(b.preventDefault(),angular.element("#mvpFilter").select(),window.scrollTo(0,0))}),a.mvpList=e.getMvpList(),g.sync().then(function(){a.getTrackList(),a.update()}),c(function(){a.initialized=!0},1500)};a.orderTrackList=function(a){return a&&"object"==typeof a&&a.$track?(a.$track.$highlight="",a.$track.$respawn?a.$track.$respawn.min<0&&a.$track.$respawn.max<0&&-1*a.$track.$respawn.min>3600?(a.$track.$highlight="stale",-a.$track.$respawn.min):(a.$track.$respawn.min>0&&a.$track.$respawn.min<=300?a.$track.$highlight="warning":a.$track.$respawn.min>0?a.$track.$highlight="":a.$track.$highlight="danger",a.$track.$respawn.min<=0&&a.$track.$respawn.max<=0?Number.MIN_SAFE_INTEGER+a.$track.$respawn.min:Number.MIN_SAFE_INTEGER+a.$track.$respawn.min+1e4):(a.$track.$highlight="",Number.MAX_SAFE_INTEGER)):void 0},a.getTrackList=function(){b.settings.group&&(i&&i(),a.trackList=e.getObj("tracks/"+b.settings.group),a.trackList.$bindTo(a,"trackList").then(function(a){i=a}))},a.getTrack=function(b){if("object"==typeof a.trackList){var c=b.id+b.map;return a.trackList[c]||null}return null},a.setTrack=function(c,d){if(!g.isSynced())return void window.alert("Can't set track. Time not synchronized. Please reload the page.");var e=c.id+c.map,f=g.unix();d=d||0,a.trackList[e]={id:c.id,map:c.map,name:b.login.userData.username||"",time:f-d}},a.removeTrack=function(a){var c=window.confirm("Do you want to remove this entry?");if(c){var d=a.id+a.map,f=e.get("tracks/"+b.settings.group+"/"+d);f.remove(),a.$track={}}},a.isValid=function(){return a.login.authenticated&&a.login.userData.activated&&a.login.userData.username&&a.settings.group},a.update=function(){var d=g.unix();if(g.isSynced())for(var e=function(a,b){a&&window.alert("Unable to show notification: "+a.message)},h=0;h<a.mvpList.length;h++){var i=a.mvpList[h],j=i.id+i.map;if(i&&i.$track&&i.$track.time){var k=Math.round(i.respawn.min-(d-i.$track.time)),l=Math.round(i.respawn.max-(d-i.$track.time));i.$state=!1;var m=60*(b.settings.notificationTime||0);if(0>=k&&0>=l){i.$state=!0;var n=l;l=k,k=n}else m>=k&&b.settings.notificationEnabled&&a.notifications[j]!==i.$track.time&&(f.showNotification("Ragnarok MVP Tracker",{body:i.name+" ("+i.map+") spawns in "+Math.round(k/60)+" to "+Math.round(l/60)+" minutes",icon:"images/mvp.be44a668.png",autoClose:3e4},e),a.notifications[j]=i.$track.time);i.$track.$respawn=i.$track.$respawn||{},i.$track.$respawn.min=k,i.$track.$respawn.max=l,-1*l>3.2*i.respawn.max}}c.cancel(a.updateTimer),a.updateTimer=c(a.update,1e3*(20-d%20))},j()}]),app.controller("SettingsCtrl",["$scope","$rootScope","$timeout","$state","$transitions","$firebaseAuth","localStorageService",function(a,b,c,d,e,f,g){var h=function(){a.settingsDropdown=a.settingsDropdown||{},a.notificationTimeList=[1,2,3,4,5];var d;b.$watch("settings",function(){c.cancel(d),d=c(a.save,2e3)},!0),b.$watch("settings.notificationEnabled",function(){Notification&&b.settings.notificationEnabled&&Notification.requestPermission(function(a){"granted"===a?b.settings.notificationEnabled=!0:b.settings.notificationEnabled=!1})}),a.load()};a.load=function(){b.settings=g.get("settings")||null,b.settings&&"object"==typeof b.settings||(b.settings={authKey:"",group:"",name:"",notificationEnabled:!1,notificationTime:1})},a.save=function(){g.set("settings",b.settings)},b.isValidSettings=function(){return b.settings.authKey&&b.settings.group&&b.settings.name?!0:!1},h()}]),app.service("DataSrv",["firebase","$firebaseObject",function(a,b){var c={};return c.getMvpList=function(){return[{id:1511,map:"moc_pryd06",name:"Amon Ra",respawn:{min:3600,max:4200}},{id:1096,map:"pay_fild04",name:"Angeling",respawn:{min:3600,max:5400}},{id:1096,map:"xmas_dun01",name:"Angeling",respawn:{min:3600,max:5400}},{id:1096,map:"yuno_fild03",name:"Angeling",respawn:{min:3600,max:5400}},{id:1388,map:"yuno_fild05",name:"Archangeling",respawn:{min:3600,max:3780}},{id:1785,map:"ra_fild02",name:"Atroce",respawn:{min:14400,max:15e3}},{id:1785,map:"ra_fild03",name:"Atroce",respawn:{min:10800,max:11400}},{id:1785,map:"ra_fild04",name:"Atroce",respawn:{min:18e3,max:18600}},{id:1785,map:"ve_fild01",name:"Atroce",respawn:{min:10800,max:11400}},{id:1785,map:"ve_fild02",name:"Atroce",respawn:{min:21600,max:22200}},{id:1630,map:"lou_dun03",name:"White Lady",respawn:{min:7020,max:7620}},{id:1039,map:"prt_maze03",name:"Baphomet",respawn:{min:7200,max:7800}},{id:1873,map:"abbey03",name:"Beelzebub",respawn:{min:43200,max:43800}},{id:1646,map:"lhz_dun03",name:"Lord Knight Seyren (Bio 3)",respawn:{min:6e3,max:7800}},{id:1647,map:"lhz_dun03",name:"Assassin Cross Eremes (Bio 3)",respawn:{min:6e3,max:7800}},{id:1648,map:"lhz_dun03",name:"Whitesmith Howard (Bio 3)",respawn:{min:6e3,max:7800}},{id:1649,map:"lhz_dun03",name:"High Priest Margaretha (Bio 3)",respawn:{min:6e3,max:7800}},{id:1650,map:"lhz_dun03",name:"Sniper Cecil (Bio 3)",respawn:{min:6e3,max:7800}},{id:1651,map:"lhz_dun03",name:"High Wizard Kathryne (Bio 3)",respawn:{min:6e3,max:7800}},{id:2068,map:"bra_dun02",name:"Boitata",respawn:{min:7200,max:7800}},{id:1272,map:"gl_chyard",name:"Dark Lord",respawn:{min:3600,max:4200}},{id:1719,map:"abyss_03",name:"Detale",respawn:{min:10800,max:11400}},{id:1582,map:"pay_fild04",name:"Deviling",respawn:{min:7200,max:10800}},{id:1582,map:"yuno_fild03",name:"Deviling",respawn:{min:3600,max:5400}},{id:1046,map:"gef_dun02",name:"Doppelganger",respawn:{min:7200,max:7800}},{id:1389,map:"gef_dun01",name:"Dracula",respawn:{min:3600,max:4200}},{id:1112,map:"treasure02",name:"Drake",respawn:{min:7200,max:7800}},{id:1115,map:"pay_fild11",name:"Eddga",respawn:{min:7200,max:7800}},{id:1652,map:"lhz_dun02",name:"Egnigem Cenia",respawn:{min:7200,max:7800}},{id:1418,map:"gon_dun03",name:"Evil Snake Lord",respawn:{min:5640,max:6240}},{id:1871,map:"abbey02",name:"Fallen Bishop Hibram",respawn:{min:7200,max:7800}},{id:1252,map:"xmas_fild01",name:"Garm",respawn:{min:7200,max:7800}},{id:1120,map:"pay_fild04",name:"Ghostring",respawn:{min:3600,max:5400}},{id:1120,map:"prt_maze03",name:"Ghostring",respawn:{min:6780,max:10200}},{id:1120,map:"treasure02",name:"Ghostring",respawn:{min:1980,max:3180}},{id:1768,map:"ra_san05",name:"Gloom Under Night",respawn:{min:18e3,max:18600}},{id:1086,map:"prt_sewb4",name:"Golden Thief Bug",respawn:{min:3600,max:4200}},{id:1885,map:"mosk_dun03",name:"Gopinich",respawn:{min:7200,max:7800}},{id:1990,map:"man_fild03",name:"Hardrock Mammoth",respawn:{min:14400,max:14460}},{id:1832,map:"thor_v03",name:"Ifrit",respawn:{min:39600,max:40200}},{id:1492,map:"ama_dun03",name:"Incantation Samurai",respawn:{min:5460,max:6060}},{id:1734,map:"kh_dun02",name:"Kiel D-01",respawn:{min:7200,max:10800}},{id:2202,map:"iz_dun05",name:"Kraken",respawn:{min:7200,max:7800}},{id:1779,map:"ice_dun03",name:"Ktullanux",respawn:{min:7200,max:7260}},{id:1688,map:"ayo_dun02",name:"Lady Tanee",respawn:{min:25200,max:25800}},{id:2156,map:"dew_dun01",name:"Leak",respawn:{min:7200,max:7800}},{id:1373,map:"niflheim",name:"Lord of Death",respawn:{min:7980,max:8040}},{id:1147,map:"anthell02",name:"Maya",respawn:{min:7200,max:7800}},{id:1289,map:"anthell01",name:"Maya Purple",respawn:{min:7200,max:10800}},{id:1059,map:"mjolnir_04",name:"Mistress",respawn:{min:7200,max:7800}},{id:1150,map:"pay_dun04",name:"Moonlight Flower",respawn:{min:3600,max:4200}},{id:1087,map:"gef_fild02",name:"Orc Hero",respawn:{min:86400,max:87e3}},{id:1087,map:"gef_fild14",name:"Orc Hero",respawn:{min:3600,max:4200}},{id:1190,map:"gef_fild10",name:"Orc Lord",respawn:{min:7200,max:7800}},{id:1038,map:"moc_pryd04",name:"Osiris",respawn:{min:3600,max:10800}},{id:1157,map:"in_sphinx5",name:"Pharaoh",respawn:{min:3600,max:4200}},{id:1159,map:"moc_fild17",name:"Phreeoni",respawn:{min:7200,max:7800}},{id:2087,map:"dic_dun02",name:"Queen Scaraba",respawn:{min:7200,max:7260}},{id:2165,map:"dic_dun03",name:"Gold Queen Scaraba",respawn:{min:7200,max:7260}},{id:1623,map:"ein_dun02",name:"RSX-0806",respawn:{min:7500,max:8100}},{id:1251,map:"xmas_dun02",name:"Stormy Knight",respawn:{min:3600,max:4200}},{id:1583,map:"beach_dun",name:"Tao Gunka (West)",respawn:{min:18e3,max:18600}},{id:1583,map:"beach_dun2",name:"Tao Gunka (North)",respawn:{min:18e3,max:18600}},{id:1583,map:"beach_dun3",name:"Tao Gunka (East)",respawn:{min:18e3,max:18600}},{id:1991,map:"spl_fild03",name:"Tendrillion",respawn:{min:3600,max:3660}},{id:1708,map:"thana_boss",name:"Thanatos",respawn:{min:7200,max:7260}},{id:1312,map:"tur_dun04",name:"Turtle General",respawn:{min:3600,max:4200}},{id:1751,map:"odin_tem03",name:"Valkyrie Randgris",respawn:{min:28800,max:50400}},{id:1685,map:"jupe_core",name:"Vesper",respawn:{min:7200,max:7800}},{id:1917,map:"moc_fild22",name:"Wounded Morroc",respawn:{min:43200,max:54e3}}]},c.get=function(b){var c=a.database().ref(b);return c},c.getObj=function(a){var d=c.get(a),e=b(d);return e},c}]),app.filter("ceil",function(){return function(a){return Math.ceil(a)}}),app.service("time",["$rootScope","$http",function(a,b){var c={},d=0,e=0,f=!1;return c.sync=function(){return b.get("https://ntp-a1.nict.go.jp/cgi-bin/json").then(function(a){e=Math.floor(a.data.st),d=Math.floor((new Date).getTime()/1e3),f=!0})["catch"](function(a){f=!1})},c.isSynced=function(){return f},c.unix=function(){var a=Math.floor((new Date).getTime()/1e3);if(!f)return a;var b=a-d,c=e+b;return c},c}]),app.controller("UsersCtrl",["$rootScope","$scope","$timeout","localStorageService","DataSrv","time",function(a,b,c,d,e,f){var g,h=function(){b.updateTimeTimer=null,b.updateUsersTimer=null,b.usersOnline=[],b.$watch("usersList",function(a,c){b.updateUsers()}),b.getUsersList(),b.updateTime(),b.updateUsers()};b.getUsersList=function(){g&&g(),b.usersList=e.getObj("users"),b.usersList.$bindTo(b,"usersList").then(function(a){g=a})},b.updateTime=function(){c.cancel(b.updateTimeTimer),b.updateTimeTimer=c(b.updateTime,1e4);var d=f.unix();f.isSynced()&&a.login.authenticated&&(a.login.userData.lastOnline=d)},b.updateUsers=function(){c.cancel(b.updateUsersTimer),b.updateUsersTimer=c(b.updateUsers,5e3);var a=f.unix();if(b.usersOnline.length=0,b.usersList&&"object"==typeof b.usersList){var d;for(var e in b.usersList)d=b.usersList[e],d&&"object"==typeof d&&d.lastOnline>=a-20&&b.usersOnline.push(d)}},h()}]),app.controller("SignupCtrl",["$rootScope","$scope","$timeout","$element","$state","AuthSrv","DataSrv",function(a,b,c,d,e,f,g){var h=function(){b.form=d.find("#signupForm"),b.signup={$active:!1,password1:"",password2:"",username:""},a.$watch("login.authenticated",function(b,c){a.login.authenticated===!0&&e.go("mvp")}),b.$watch("signup.email",function(a,c){b.signup.$emailValid=b.validateEmail()}),b.$watchGroup(["signup.password1","signup.password2"],function(a,c){b.signup.$passwordValid=b.validatePassword()})};b.isValid=function(){return b.signup.$emailValid&&b.signup.email&&b.signup.$passwordValid&&b.signup.password1&&b.signup.password2},b.validateEmail=function(){var a=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/i;return a.test(b.signup.email)},b.validatePassword=function(){return b.signup.password1&&b.signup.password1===b.signup.password2&&b.signup.password1.length>5},b.submit=function(){b.form.removeClass("animated shake");var d=b.signup.email,g=b.signup.password1,h={username:b.signup.username};b.signup.$active=!0,f.create(d,g,h).then(function(){return a.login.credentials.email=d,a.login.credentials.password=g,b.authenticate()}).then(function(){b.signup.$active=!1,e.go("mvp")})["catch"](function(a){b.form.addClass("animated shake"),c(function(){b.form.removeClass("animated shake")},1e3),b.errorMessage=a.message,b.signup.$active=!1})},h()}]),app.controller("AuthCtrl",["$rootScope","$scope","$state","$timeout","localStorageService","AuthSrv","DataSrv",function(a,b,c,d,e,f,g){var h,i=function(){a.login={};var c;a.$watch("login.credentials",function(){d.cancel(c),c=d(b.save,2e3)},!0),f.onStateChange(function(b){b||(a.login.user=null,a.login.authenticated=!1,h&&h(),a.login.userData={})}),b.load(),b.authenticate()};b.load=function(){a.login.credentials=e.get("credentials")||null,a.login.credentials&&"object"==typeof a.login.credentials||(a.login.credentials={email:"",password:""})},b.save=function(){e.set("credentials",a.login.credentials)},b.authenticate=function(){return a.login.credentials.email&&a.login.credentials.password?(a.login.authenticated=!1,a.login.authenticating=!0,f.login(a.login.credentials.email,a.login.credentials.password).then(function(c){return a.login.user=c,b.getUserData()}).then(function(){console.log("authenticate OK",a.login.user),a.login.authenticated=!0})["catch"](function(b){throw console.log("authenticate ERROR",b),a.login.user=null,a.login.authenticated=!1,b})["finally"](function(){a.login.authenticating=!1})):(a.login.authenticated=!1,void(a.login.authenticating=!1))},b.logout=function(){a.login.credentials.email=null,a.login.credentials.password=null,b.save(),f.logout().then(function(){c.go("login")})["catch"](function(){})},b.getUserData=function(){return h&&h(),a.login.userData=g.getObj("users/"+a.login.user.uid),a.login.userData.$bindTo(a,"login.userData").then(function(a){h=a}),a.login.userData.$loaded()},i()}]),app.controller("LoginCtrl",["$rootScope","$scope","$timeout","$state","$element",function(a,b,c,d,e){var f=function(){b.form=e.find("#loginForm"),b.credentials={email:"",password:""},a.$watch("login.authenticated",function(b,c){a.login.authenticated===!0&&d.go("mvp")})};b.isValid=function(){return b.validateEmail()&&b.validatePassword()},b.validateEmail=function(){var a=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/i;return a.test(b.credentials.email)},b.validatePassword=function(){return b.credentials.password&&b.credentials.password.length>0},b.submit=function(){b.form.removeClass("animated shake"),a.login.credentials.email=b.credentials.email,a.login.credentials.password=b.credentials.password,b.authenticate().then(function(){d.go("mvp")})["catch"](function(d){a.login.credentials.email=null,a.login.credentials.password=null,b.form.addClass("animated shake"),c(function(){b.form.removeClass("animated shake")},1e3),b.errorMessage="Couldn't login. Please verify your E-Mail address and password."})},f()}]),app.service("AuthSrv",["$firebaseAuth","DataSrv",function(a,b){var c={};return c.create=function(c,d,e){return a().$createUserWithEmailAndPassword(c,d).then(function(a){var c=b.getObj("users/"+a.uid);for(var d in e)c[d]=e[d];c.$save()})["catch"](function(a){throw console.log(a),a})},c.login=function(b,c){return a().$signInWithEmailAndPassword(b,c)},c.logout=function(){return a().$signOut()},c.onStateChange=function(b){a().$onAuthStateChanged(b)},c}]),angular.module("roMvpTrackerApp").run(["$templateCache",function(a){a.put("views/login.html",'<div class="form-login-container" ng-controller="LoginCtrl"> <form id="loginForm" class="form-horizontal form-login"> <div class="form-login-header" ng-class="isValid() ? \'valid\' : \'invalid\'"></div> <div class="form-login-content"> <h4>Login</h4> <!-- email --> <div class="form-group"> <label class="col-md-12 control-label" for="email">E-Mail</label> <div class="col-md-12"> <input id="email" name="email" type="text" placeholder="" class="form-control input-md" ng-model="credentials.email" ng-disabled="login.authenticating"> </div> </div> <!-- password1 --> <div class="form-group"> <label class="col-md-12 control-label" for="password1">Password</label> <div class="col-md-12"> <input id="password1" name="password1" type="password" placeholder="" class="form-control input-md" ng-model="credentials.password" ng-disabled="login.authenticating"> </div> </div> <!-- submit --> <div class="form-group"> <div class="col-md-12"> <button name="submit" class="btn btn-default" ng-click="submit()" ng-disabled="!isValid() || login.authenticating">Login</button> <a ui-sref="signup">Create Account</a> </div> </div> <!-- error --> <div class="text-danger"><strong>{{errorMessage}}</strong></div> </div> </form> </div>'),a.put("views/mvp.html",'<div ng-controller="MvpCtrl" ng-ifs="initialized"> <div ng-if="login.authenticated"> <div class="alert alert-danger animate-out-hide animated fadeIn" ng-if="!login.userData.activated"> <strong>Authentication Error!</strong> Your account is waiting for activation by a moderator. </div> <div class="alert alert-danger animate-out-hide animated fadeIn" ng-if="!login.userData.username"> <strong>Settings Error!</strong> Please set a display name in the settings. </div> <div class="alert alert-danger animate-out-hide animated fadeIn" ng-if="!settings.group"> <strong>Settings Error!</strong> Please set a tracker group in the settings. </div> </div> <div class="animate-out-hide animated fadeIn" ng-if="isValid()"> <div class="input-group mvp-filter pull-right"> <input id="mvpFilter" type="text" class="form-control form-control-sm" placeholder="Search" ng-class="{\'rounded\': !mvpFilter}" ng-model="mvpFilter"> <span class="input-group-btn" ng-show="mvpFilter"> <button class="btn btn-default" type="button" ng-click="mvpFilter=\'\'"> <span class="fas fa-times"></span> </button> </span> </div> <table class="table table-striped mvp-list"> <thead> <tr> <td width="30%">MVP</td> <td width="50%">Spawn Time</td> <td width="20%">Update</td> </tr> </thead> <tbody> <tr ng-repeat="mvp in (mvpList | filter:mvpFilter | orderBy:orderTrackList)" ng-class="mvp.$track.$highlight"> <td> <div> <span class="mvp-name"><a href="https://panel.talonro.com/mobdb/{{mvp.id}}/" target="_blank">{{mvp.name}}</a></span> <small>(<a href="http://ratemyserver.net/index.php?page=npc_shop_warp&map={{mvp.map}}" target="_blank">{{mvp.map}}</a>)</small> </div> <div><small>{{mvp.respawn.min / 60 | ceil | number:0}} – {{mvp.respawn.max / 60 | ceil | number:0}} Minutes</small></div> </td> <td> <div ng-if="mvp.$track.$respawn"> <div> <span>{{mvp.$state ? \'\' : \'in\'}}</span> <strong> <span ng-class="mvp.$track.$respawn.min > 0 ? \'text-success\' : \'text-danger\'"> {{mvp.$state ? (((-1 * mvp.$track.$respawn.min) / 60) | ceil | number:0) : ((mvp.$track.$respawn.min / 60) | ceil | number:0)}} </span> </strong> minutes to <strong> <span ng-class="mvp.$track.$respawn.max > 0 ? \'text-success\' : \'text-danger\'"> {{mvp.$state ? (((-1 * mvp.$track.$respawn.max) / 60) | ceil | number:0) : ((mvp.$track.$respawn.max / 60) | ceil | number:0)}} </span> </strong> minutes <span>{{mvp.$state ? \'ago\' : \'\'}}</span> </div> <div>last tracked <span am-time-ago="mvp.$track.time * 1000"></span> by <strong>{{mvp.$track.name}}</strong></div> </div> <div ng-if="!mvp.$track.$respawn">–</div> </td> <td> <form class="form-inline" role="form"> <div class="input-group input-group-sm group-track"> <input type="text" class="form-control form-control-sm" ng-init="ago=0" ng-blur="!ago ? ago=0 : ago=ago" ng-model="ago"> <span class="ago"></span> <span class="input-group-btn"> <button class="btn btn-default btn-sm" type="button" ng-click="setTrack(mvp, ago * 60); ago=0;"> <span class="fas fa-share"></span> </button> </span> </div> <div class="form-group" ng-if="mvp.$track.$respawn"> <button class="btn btn-default btn-sm" type="button" ng-click="removeTrack(mvp)"> <span class="fas fa-times"></span> </button> </div> </form> </td> </tr> </tbody> </table> </div> </div>'),a.put("views/settings.html",'<form class="form-horizontal" ng-controller="SettingsCtrl"> <!-- email --> <div class="form-group"> <label class="col-md-12 control-label" for="authKey">E-Mail</label> <div class="col-md-12"> <div class="input-group"> <input id="settings-email" name="settings-email" type="text" placeholder="" class="form-control input-md" ng-model="login.user.email" disabled> <span class="input-group-btn"> <span name="auth" class="btn btn-default" uib-tooltip="Logout" ng-click="settingsDropdown.open=false;logout();"> <i class="fas fa-sign-out-alt"></i> </span> </span> </div> </div> </div> <!-- username --> <div class="form-group"> <label class="col-md-12 control-label" for="username">Display Name</label> <div class="col-md-12"> <input id="settings-username" name="settings-username" type="text" placeholder="" class="form-control input-md" ng-model="login.userData.username"> </div> </div> <!-- group --> <div class="form-group"> <label class="col-md-12 control-label" for="group">Tracker Group</label> <div class="col-md-12"> <input id="settings-group" name="settings-group" type="text" placeholder="" class="form-control input-md" ng-model="settings.group"> </div> </div> <!-- notification--> <div class="form-group"> <label class="col-md-12 control-label" for="">Notification</label> <div class="col-md-12"> <label class="checkbox-inline" for="notification"> <input type="checkbox" id="notification" name="notification" value="1" ng-model="settings.notificationEnabled"> Notify <span class="form-inline"> <select class="form-control input-xs notification-time" ng-model="settings.notificationTime" ng-options="value*1 for (key, value) in notificationTimeList"></select> </span> minute(s) before spawn </label> </div> </div> </form>'),a.put("views/signup.html",'<div class="form-login-container" ng-controller="SignupCtrl"> <form id="signupForm" class="form-horizontal form-login"> <div class="form-login-header" ng-class="isValid() ? \'valid\' : \'invalid\'"></div> <div class="form-login-content"> <h4>Create Account</h4> <!-- email--> <div class="form-group"> <label class="col-md-12 control-label" for="email">E-Mail</label> <div class="col-md-12"> <input id="email" name="email" type="text" placeholder="" class="form-control input-md" ng-model="signup.email" ng-disabled="signup.$active"> </div> </div> <!-- password1--> <div class="form-group"> <label class="col-md-12 control-label" for="password1">Password</label> <div class="col-md-12"> <input id="password1" name="password1" type="password" class="form-control input-md" ng-model="signup.password1" ng-disabled="signup.$active"> </div> </div> <!-- password2--> <div class="form-group"> <label class="col-md-12 control-label" for="password2">Verify Password</label> <div class="col-md-12"> <input id="password2" name="password2" type="password" class="form-control input-md" ng-model="signup.password2" ng-disabled="signup.$active"> </div> </div> <!-- username--> <div class="form-group"> <label class="col-md-12 control-label" for="username">Display Name</label> <div class="col-md-12"> <input id="username" name="username" type="text" class="form-control input-md" ng-model="signup.username" ng-disabled="signup.$active"> </div> </div> <!-- submit--> <div class="form-group"> <div class="col-md-12"> <button name="submit" class="btn btn-default" ng-click="submit()" ng-disabled="!isValid() || signup.$active">Signup</button> <a ui-sref="login">Login</a> </div> </div> <!-- error --> <div class="text-danger"><strong>{{errorMessage}}</strong></div> </div> </form> </div>'),a.put("views/users.html",'<div> <div class="header">Users Online</div> <div ng-repeat="(uid, user) in usersOnline | orderBy:\'username\'" class="user"> <i class="fas fa-circle fa-xs"></i><span class="username">{{user.username || user.$uid}}</span> </div> </div>')}]);